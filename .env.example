# PreventIA News Analytics - Configuration Template
# Copy this file to .env and customize the values for your environment

# =============================================================================
# BASIC ENVIRONMENT CONFIGURATION
# =============================================================================

# Environment Type: development, staging, production
ENVIRONMENT=development
DEBUG=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
POSTGRES_DB=preventia_news
POSTGRES_USER=preventia
POSTGRES_PASSWORD=change_this_password_in_production
DATABASE_URL=postgresql://preventia:change_this_password_in_production@postgres:5432/preventia_news

# Database Connection Settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20
DB_POOL_TIMEOUT=30

# =============================================================================
# CACHE AND REDIS CONFIGURATION
# =============================================================================

# Redis Settings
REDIS_URL=redis://redis:6379/0
REDIS_DB=0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Cache TTL Settings (in seconds)
CACHE_TTL=3600
ANALYTICS_CACHE_TTL=1800
ARTICLES_CACHE_TTL=600

# =============================================================================
# API CONFIGURATION
# =============================================================================

# FastAPI Settings
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_DEBUG=false

# CORS Configuration (add your frontend URLs)
CORS_ORIGINS=["http://localhost:3000","http://localhost:5173","https://yourdomain.com"]

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Authentication (GENERATE SECURE KEYS FOR PRODUCTION!)
JWT_SECRET_KEY=your-development-secret-key-change-in-production-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# API Security
API_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# NLP AND AI CONFIGURATION
# =============================================================================

# OpenAI API Settings (REQUIRED for topic classification)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.3
OPENAI_TIMEOUT=30

# NLP Processing Settings
NLP_BATCH_SIZE=25
SENTIMENT_TIMEOUT=300
SENTIMENT_BATCH_SIZE=50
TOPIC_CONFIDENCE_THRESHOLD=0.7

# Spacy Configuration
SPACY_MODEL=es_core_news_sm

# =============================================================================
# WEB SCRAPING CONFIGURATION
# =============================================================================

# Scraper Behavior Settings
SCRAPER_MAX_CONCURRENT=5
SCRAPER_DELAY_MIN=2
SCRAPER_DELAY_MAX=5
SCRAPER_TIMEOUT=30
SCRAPER_MAX_RETRIES=3

# Content Validation
SCRAPER_REQUIRE_DATE=true
SCRAPER_REQUIRE_SUMMARY=true
SCRAPER_MIN_TITLE_LENGTH=10
SCRAPER_MIN_SUMMARY_LENGTH=20
MAX_ARTICLE_LENGTH=50000
MIN_ARTICLE_LENGTH=100

# Browser Settings (Playwright)
BROWSER_HEADLESS=true
BROWSER_TIMEOUT=60000
BROWSER_VIEWPORT_WIDTH=1280
BROWSER_VIEWPORT_HEIGHT=720

# Compliance Settings
ROBOTS_RESPECT=true
CRAWL_DELAY_DEFAULT=2
FAIR_USE_MAX_ARTICLES_PER_DAY=100
SCRAPER_USER_AGENT=PreventIA-Bot/1.0 (+https://preventia.com/bot)

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================

# Analytics Processing
ANALYTICS_ENABLED=true
DAYS_INTERVAL=7
WEEKLY_DAY=4
WEEKLY_TIME=22:00

# Decision Engine
DECISION_PUBLISH_THRESHOLD=2

# =============================================================================
# PUBLISHING CONFIGURATION (Optional)
# =============================================================================

# WordPress Integration (if using publisher service)
WORDPRESS_URL=https://your-wordpress-site.com
WORDPRESS_USERNAME=your-wp-username
WORDPRESS_PASSWORD=your-wp-password
WORDPRESS_FEATURE_IMAGE_ID=277

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Logging Configuration
LOG_LEVEL=INFO
ENABLE_STRUCTURED_LOGGING=true
ENABLE_METRICS=true
LOG_FORMAT=json

# Service-specific Logging
API_LOG_LEVEL=INFO
SCRAPER_LOG_LEVEL=INFO
NLP_LOG_LEVEL=INFO

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# React/Vite Frontend
VITE_API_URL=http://localhost:8000
VITE_APP_NAME=PreventIA News Analytics
VITE_APP_VERSION=1.0.0
VITE_DEBUG=false
VITE_DEFAULT_LANGUAGE=es

# Dashboard Settings
VITE_DASHBOARD_REFRESH_INTERVAL=30000
VITE_CHARTS_ANIMATION=true

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Tools
HOT_RELOAD=false
AUTO_MIGRATE=true
SEED_SAMPLE_DATA=false
MOCK_EXTERNAL_APIS=false

# Testing
TEST_DATABASE_URL=postgresql://preventia:test_password@localhost:5433/preventia_test
RUN_INTEGRATION_TESTS=false

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================

# For production deployment, override these values:
# ENVIRONMENT=production
# DEBUG=false
# API_RELOAD=false
# JWT_SECRET_KEY=generate_secure_production_key_here
# DATABASE_URL=postgresql://user:password@prod-host:5432/preventia_news
# REDIS_URL=redis://prod-redis-host:6379/0
# OPENAI_API_KEY=your_production_openai_key

# =============================================================================
# IMPORTANT NOTES
# =============================================================================

# SECURITY REMINDERS:
# 1. Change all default passwords before production deployment
# 2. Generate secure random values for JWT_SECRET_KEY (min 32 chars)
# 3. Use environment-specific database URLs
# 4. Configure proper CORS origins for your domains
# 5. Set strong passwords for all services
# 6. Use HTTPS in production environments

# PERFORMANCE TIPS:
# - Adjust NLP_BATCH_SIZE based on available memory (25-100)
# - Set REDIS memory limits appropriately
# - Tune database connection pool sizes
# - Configure cache TTL values for your use case
# - Monitor scraper delays to avoid being blocked

# COMPLIANCE REQUIREMENTS:
# - Always respect robots.txt files
# - Set appropriate crawl delays (minimum 2 seconds)
# - Use descriptive User-Agent strings
# - Implement fair use limits
# - Document legal basis for data collection
